# Учебная практика: Автоматизация обновления и патчинга ПО
# 1. Теоретическая часть — что, зачем и почему
## Зачем обновлять ПО?
* Закрытие известных уязвимостей (патчи безопасности)
* Повышение стабильности (фиксы багов)
* Добавление новых возможностей (фичи)
* Улучшение совместимости с ОС и другим софтом
## Что будет, если не обновлять?
* Взлом через известную дыру (например, EternalBlue — WannaCry)
* Отвалившиеся зависимости, несовместимость
* Нестабильная работа, фризы, падения
* Утечка данных, штрафы (особенно если ты в GDPR-зоне)
# Ручное vs Автоматическое обновление
| **Характеристика**         | **Ручное обновление** | **Автоматическое обновление** |
|-----------------------------|-----------------------|-------------------------------|
| **Контроль**                | Полный                | Частичный                    |
| **Риск забыть**             | Высокий               | Низкий                       |
| **Возможность протестить**  | Да                    | Не всегда (если auto)        |
| **Требует времени**         | Да                    | Нет                          |
| **Подходит для сервера**    | Нет                   | Да, с тестированием          |
# Способы автоматизации:
* Менеджеры пакетов: `apt`, `yum`, `dnf`, `snap`, `flatpak`
* Планировщики задач: `cron`, `systemd.timer`
* Скрипты и CI/CD: `bash`, `python`, `GitHub Actions`, `GitLab CI`
* Конфигурационные тулзы: `Ansible`, `Puppet`, `Chef`, `SaltStack`
# Истории провалов (реальные кейсы)
* Equifax 2017: не обновили Apache Struts → миллионы утекших данных
* WannaCry 2017: патч от Microsoft был за 2 месяца до атаки
* Heartbleed 2014: OpenSSL баг, который знали, но не обновили
# Задача 1: Ручное обновление системы
**Что сделать:**

* Выполни `sudo apt update && sudo apt upgrade -y`
* Сделай скриншот или лог

**Что написать:**

* Какие пакеты обновились?
* Были ли ошибки?
# Задача 3: Обновление конкретного ПО
**Что сделать:**

* Установи/обнови `curl`, `vlc`, `git:`
```
sudo apt install --only-upgrade curl git vlc
```
**Что написать:**

* Почему выборочное обновление бывает удобнее?
* Что может пойти не так?
# Задача 4: Напиши скрипт обновления
**Скрипт:**
```
#!/bin/bash
echo "Обновление системы:"
apt update && apt upgrade -y
echo "Готово!"
```
**Что сделать:**

* Сохрани как `update.sh`, дай права на запуск (`chmod +x`)
* Запусти

**Что приложить:**

* Скрин результата
* Комментарии по работе скрипта
# Задача 5: Проверка уязвимостей
**Что сделать:**

* Запусти:
```
apt list --upgradable
```
* Можно установить lynis и запустить аудит

**Что написать:**

* Какие пакеты нуждаются в обновлении?
* Какие из них могут быть уязвимыми?
# Задача 7: Проверка и перезапуск сервисов
**Что сделать:**

* Обнови `nginx` или `ssh`, проверь статус:
```
sudo systemctl status nginx
```
* Перезапусти:
```
sudo systemctl restart nginx
```
**Что написать:**

* Как проверить, что всё заработало?
* Что делать, если сервис не стартует?
# Задача 8: Ведение логов обновлений
**Что сделать:**

* Создай скрипт `log_update.sh`:
```
#!/bin/bash
echo "⏱️ Обновление от $(date)" >> ~/update_log.txt
apt list --upgradable >> ~/update_log.txt
apt update && apt upgrade -y >> ~/update_log.txt
echo "===============================" >> ~/update_log.txt
```
* Запусти, посмотри файл `~/update_log.txt`

**Что написать:**

* Что в логе?
* Зачем это нужно?
# Задача 9: Напоминалка об обновлениях
**Что сделать:**

* Напиши скрипт `notify_updates.sh:`
```
#!/bin/bash
echo "Доступные обновления:"
apt list --upgradable | grep -v "Listing"
```
* Можно добавить в `cron`:
```
0 9 * * * bash /путь/к/notify_updates.sh >> ~/update_reminder.txt
```
**Что написать:**

* Как часто надо проверять?
* Почему важно не забывать?
# 3. Выводы
* Какие задачи были самыми полезными?
* Что нового узнал?
* Будешь ли использовать автообновления в своих проектах?